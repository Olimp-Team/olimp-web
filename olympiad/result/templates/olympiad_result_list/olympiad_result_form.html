{% extends 'base_olimp.html' %}
{% load form_filters %}
{% load static %}
{% block content %}
<div class="container mx-auto p-6 bg-white shadow-lg rounded-lg">
    <link rel="icon" href="{% static 'homepage/img/logoolimp.jpg' %}">

    <form method="post" class="space-y-6">
        {% csrf_token %}

        <!-- Отображение общих ошибок формы -->
        {% if form.non_field_errors %}
        <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative" role="alert">
            <strong class="font-bold">Ошибки:</strong>
            <span class="block sm:inline">{{ form.non_field_errors }}</span>
        </div>
        {% endif %}

        <div class="student">
            <h1 class="text-xl font-bold mb-2">Ученик:</h1>
            {{ form.student|add_class:"block w-full mt-1 p-2 border rounded student-select" }}
            {% if form.student.errors %}
            <p class="text-red-500 text-xs italic">{{ form.student.errors }}</p>
            {% endif %}
        </div>

        <div class="olympiad">
            <h1 class="text-xl font-bold mb-2">Олимпиада:</h1>
            {{ form.olympiad|add_class:"block w-full mt-1 p-2 border rounded olympiad-select" }}
            {% if form.olympiad.errors %}
            <p class="text-red-500 text-xs italic">{{ form.olympiad.errors }}</p>
            {% endif %}
        </div>

        <div class="score">
            <h1 class="text-xl font-bold mb-2">Результат:</h1>
            {{ form.score|add_class:"block w-full mt-1 p-2 border rounded" }}
            {% if form.score.errors %}
            <p class="text-red-500 text-xs italic">{{ form.score.errors }}</p>
            {% endif %}
        </div>

        <div class="status">
            <h1 class="text-xl font-bold mb-2">Статус:</h1>
            {{ form.status|add_class:"block w-full mt-1 p-2 border rounded status-select" }}
            {% if form.status.errors %}
            <p class="text-red-500 text-xs italic">{{ form.status.errors }}</p>
            {% endif %}
        </div>

        <div class="text-center">
            <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">Сохранить</button>
        </div>
    </form>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css" rel="stylesheet" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js"></script>

<script>
$(document).ready(function () {
    $('.student-select').select2({
        placeholder: 'Выберите ученика',
        allowClear: true
    });

    $('.olympiad-select').select2({
        placeholder: 'Выберите олимпиаду',
        allowClear: true
    });

    $('.status-select').select2({
        placeholder: 'Выберите статус',
        allowClear: true
    });
});
</script>
{% endblock %}
